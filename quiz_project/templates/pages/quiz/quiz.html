{% extends 'bases/base_profile.html' %}

{% block content %}
    		<!-- bradcam_area_start -->
		<div class="bradcam_area breadcam_bg overlay2">
            <h3>Quiz Plateforme</h3>
            
                {% if user.is_authenticated %}
                    <p>Welcome, {{ user.get_username }}. </p>
                {% endif %}
           
        </div>
        <!-- bradcam_area_end -->
        <div id="myapp">
            <div class="container"><br><br>
                <div class="row">
                    
                    <div class="col-md-8">
                        <h2>Composition</h2><br><br>
                        <h3>Sujets</h3><br><br>
                        <div v-if="! isstart" >
                            <p> Commencer le quiz en selectionnannt !</p>
                            
                        </div>
                        <div v-if="isstart" >
                            <div >
                                ${ question.description }  
                            </div>
                            <br><br>
                        </div>
                                <h3>Propositions</h3> 
                                <br><br><br>
                                <div v-if="! isstart" >
                                    <h5> Oh les propositions ! :-)</5>
                                    
                                </div>
                                <div v-if="isstart">
                                 <div > 
                                    <div  class="form-check">
                                      <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="${ proposition.propsition1 }" >
                                      <label class="form-check-label" for="exampleRadios1">
                                        ${ proposition.propsition1 }
                                      </label>
                                    </div>
                                    <div  class="form-check">
                                      <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="${ proposition.propsition2 }" >
                                      <label class="form-check-label" for="exampleRadios1">
                                        ${ proposition.propsition2 }
                                      </label>
                                    </div>
                                    <div  class="form-check">
                                      <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="${ proposition.propsition3 }" >
                                      <label class="form-check-label" for="exampleRadios1">
                                        ${ proposition.propsition3 } 
                                      </label>
                                    </div>
                                    <div  class="form-check">
                                      <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="${ proposition.propsition5 }" >
                                      <label class="form-check-label" for="exampleRadios1">
                                        ${ proposition.propsition5 }
                                      </label>
                                    </div>
                                 </div> 
                                </div>
                                <br><br><br>
                               <!--  <p>reponse 1</p>
                                <p>reponse 2</p>
                                <p>reponse 3</p>
                                <p>reponse 4</p> -->
                       
                        <br> 
                        
                            
            
                    </div>
                    <div class="col-md-4">
                        <h3>Questions</h3><br>
                        <div class="row">
                            
                            {% for item in quiz  %}
                            <div id="{{ item.id }}" class="col-md-4" style="margin-bottom: 20px;">
                                    <button  v-on:click="senddata({{ item.id }})" type="button" class="btn btn-outline-info">{{ forloop.counter  }}</button>
                            </div>
                                
                            {% endfor %}
                        
                        </div>
                        <div class="row">
                            <div style="text-align: center;">
                                    <a href="#" class="btn btn-primary">Terminer</a>
                            </div> 
                        </div>  
                            
                            
                    </div>
                        
                        
            
                </div>
            
            </div>
        </div>
        <!-- <script src="/static/vue.js"></script> 
        <script src="/static/axios.js"></script>  -->
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script> 
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
            <script>
                    new Vue({
                            el: '#myapp',
                            data: {
        
                                isregister: false,
                                isstart : false,
<<<<<<< HEAD
                                id : '',
=======
>>>>>>> add26fc6306d42563c26c60ed05845744433870d
                                result: '',
                                essai : "tout passe bien",
                                proposition: '',
                                question: '',
                                reponse : ''
                            },
                            delimiters: ["${", "}"],
                            methods: {
                                loadquestion: function (id) {
                                    axios.defaults.xsrfCookieName = 'csrftoken'
                                    axios.defaults.xsrfHeaderName = 'X-CSRFToken'
                                    axios.post('http://127.0.0.1:8000/quiz/test/', {
                                      id 
                                        }).then(response => {
                                            console.log(response)
                                            this.isstart = true
                                            this.result= response.data
                                            this.proposition = this.result['props']
                                            this.reponse = this.result['reponse']
                                        })
                                        .catch((err) => {
                                            console.log('erreur')
                                                    
                                        })
                                },
                                reponse : function (id) {
                                    axios.defaults.xsrfCookieName = 'csrftoken'
                                    axios.defaults.xsrfHeaderName = 'X-CSRFToken'
                                    axios.post('http://127.0.0.1:8000/quiz/test/', {
                                      id 
                                        }).then(response => {
                                            console.log(response)
                                            this.isstart = true
                                            this.result= response.data
                                            this.proposition = this.result['props']
                                            this.reponse = this.result['reponse']
                                        })
                                        .catch((err) => {
                                            console.log('erreur')
                                                    
                                        })
                                }, 
                                senddata: function (id) {
                                    axios.defaults.xsrfCookieName = 'csrftoken'
                                    axios.defaults.xsrfHeaderName = 'X-CSRFToken'
                                    axios.post('http://127.0.0.1:8000/graphql/', {
                                      query: `
                                        query {
                                          propostion(id:${id}){
                                            propsition1
                                            propsition2
                                            propsition3
                                            propsition5
                                          },
                                       
                                          question(id:${id}){
                                            description
                                            contenu
                                          }
                                        }

                                          `
                                        }).then(response => {
                                            console.log(response.data.data)
                                            this.isstart = true
                                            this.result= response.data.data
                                            this.proposition = response.data.data.propostion
                                            this.question = response.data.data.question
                                            
                                        })
                                        .catch((err) => {
                                            console.log('erreur')
                                                    
                                        })
                                }



                            }
                        })
                  </script>
            
{% endblock content %}
    