{% extends 'bases/base.html' %}

{% block content %}
    		<!-- bradcam_area_start -->
		<div class="bradcam_area breadcam_bg overlay2">
            <h3>Quiz Plateforme</h3>
            
                {% if user.is_authenticated %}
                    <p>Welcome, {{ user.get_username }}. </p>
                {% endif %}
           
        </div>
        <!-- bradcam_area_end -->
        <div id="myapp">
            <div class="container"><br><br>
                <div class="row">
                    
                    <div class="col-md-8">
                        <h2>Composition</h2><br><br>
                        <h3>Sujets</h3><br><br>
                        <div v-if='! isstart'>
                            <p> clickez sur les question pour commencer !</p>
                            <p>${ essai }</p>
                        </div>
                        <div v-if='isstart'>
                                <h3>Propositions</h3>  

                                <p>reponse 1</p>
                                <p>reponse 2</p>
                                <p>reponse 3</p>
                                <p>reponse 4</p>
                        </div>
                        <br> 
                        
                            
            
                    </div>
                    <div class="col-md-4">
                        <h3>Questions</h3><br>
                        <div class="row">
                            
                            {% for item in quiz  %}
                            <div id="{{ item.id }}" class="col-md-4" style="margin-bottom: 20px;">
                                    <button  v-on:click="loadquestion" type="button" class="btn btn-outline-info">{{ forloop.counter  }}</button>
                            </div>
                                
                            {% endfor %}
                        
                        </div>
                        <div class="row">
                            <div style="text-align: center;">
                                    <a href="#" class="btn btn-primary">Terminer</a>
                            </div> 
                        </div>  
                            
                            
                        </div>
                        
                        
            
                    </div>
            
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script> 
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
            <script>
                    new Vue({
                            el: '#myapp',
                            data: {
        
                                isregister: false,
                                isstart = false,
                                id : '',
                                result: '',
                                essai : "tout passe bien",
                                proposition: '',
                                reponse : ''
                            },
                            delimiters: ["${", "}"],
                            methods: {
                                loadquestion: function () {
                                    axios.defaults.xsrfCookieName = 'csrftoken'
                                    axios.defaults.xsrfHeaderName = 'X-CSRFToken'
                                    axios.post('http://127.0.0.1:8000/quiz/test/', {
                                      this.id
                                        }).then(response => {
                                            console.log(response)
                                            this.isstart = true
                                            this.result= response.data
                                            this.proposition = this.result['props']
                                            this.reponse = this.result['reponse']
                                        })
                                        .catch((err) => {
                                            console.log('erreur')
                                                    
                                        })
                                }

                            }
                        })
                  </script>
            
{% endblock content %}
    